# MySQL 体系结构和存储引擎
## 1.1 定义数据库和实例
* 数据库(database)的定义:
> 物理操作系统文件或其他形式文件类型的集合。在 MySQL 数据库中，数据库文件可以是frm、MYD、MYI、ibd结尾的文件。

* 实例(instance)的定义:
> MySQL 数据库由后台线程以及一个共享内存区域组成。共享内存可以被运行的后台线程所共享。需要牢记的是，数据库实例才是真正用于操作数据库文件的。

* 从概念上来说，数据库是文件的集合，是依照某种数据模型组织起来并存放于二级存储器中的数据集; 数据库实例是程序，是位于用户与操作系统之间的一层数据管理软件，用户对数据库数据的任何操作，包括数据库定义、数据查询、数据维护、数据库运行控制等都是在数据库实例下进行的，应用程序只有通过数据库实例才能和数据库打交道。

* 实例与数据库的关系:
> 在 MySQL 数据库中，实例与数据库的关系通常是一一对应的，即一个实例对应一个数据库，一个数据库对应一个实例。但是，在集群情况下可能存在一个数据库被多个数据实例使用的情况。

* MySQL 被设计为一个单进程多线程架构的数据库，这也就是说，MySQL 数据库实例在系统上的表现就是一个进程。

* 补充概念:
>+ 1.进程:是计算机中的具有特定功能的程序关于某数据集合上的一次动态执行过程，是系统进行资源分配和调度的基本单位，是操作系统结构的基础。进程独占内存空间，保存各自运行状态，相互间不干扰且可以互相切换。  
>+ 2.线程:线程是CPU调度的基本单位。它被包含在进程之中，是进程中的实际运作单位。一个进程中可以有多个线程，它们共享进程资源。

* 在Linux系统中通过`./mysqld_safe&`启动 MySQL 数据库，并通过`ps -ef | grep mysqld`命令观察 MySQL数据库启动后的进程情况

* 当启动实例时，MySQL 数据库会去读取配置文件，根据配置文件的参数来启动数据库实例。这与 Oracle 的参数文件(spfile)相似，不同的是，Oracle 中如果没有参数文件，在启动实例时会提示找不到参数文件，数据库启动失败。而在 MySQL 数据库中，可以没有配置文件，在这种情况下，MySQL会按照编译时的默认参数启动实例。用`mysql --help | grep my.cnf`命令可以查看当 MySQL 数据库实例启动时，会在哪些位置查找配置文件。

* MySQL 数据库会以对渠道的最后一个配置文件中的参数为准。在 Linux 环境下，配置文件一般放在/ect/m.cnf下。在 Windows 平台下，配置文件的后缀名可能是.cnf，也可能是.ini。

* 配置文件中有一个参数datadir，该参数指定了数据库所在的路径。在 Linux 系统下默认datadir为/usr/local/mysql/data，该路径只是一个链接，该链接指向了/opt/mysql_data目录。

## 1.2 MySQL 体系结构 

* MySQL 数据库体系结构组成:

>- ***连接池组件(Connection Pool)***
>- ***管理服务和工具组件(Management Service & Utillties)***
>- ***SQL 接口组件(SQL Interface)***
>- ***查询分析器组件(Parser)***
>- ***优化器组件(Optimizer)***
>- ***缓冲组件(Caches & Buffers)***
>- ***插件式存储引擎(Pluggable Storage Engines)***
>- ***物理文件(File System)***

* MySQL 数据库区别于其他数据库的最重要的一个特点就是其插件式的表存储引擎。

* ***需要特别注意的是，存储引擎是基于表的，而不是数据库。***
